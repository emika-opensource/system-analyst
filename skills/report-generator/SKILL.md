---
name: report-generator
description: Generate comprehensive research report from synthesized findings
version: 1.0.0
---

# Report Generator

## Purpose

Generate a comprehensive research report from synthesized findings. Every claim must be traceable to sources. Runs as a sub-agent spawned by the manager.

## Context

You receive:
- `session_id`: Current session
- Reads from: `${ARTIFACTS}/synthesis.yaml`, `${ARTIFACTS}/plan.yaml`, `${ARTIFACTS}/quality.yaml`
- Writes to: `${ARTIFACTS}/FINAL_REPORT.md`

Where `ARTIFACTS=/home/node/emika/spec-hub/data/research/${session_id}`

## Instructions

### 1. Load Data

```
synthesis = Read("${ARTIFACTS}/synthesis.yaml")
plan = Read("${ARTIFACTS}/plan.yaml")
quality = Read("${ARTIFACTS}/quality.yaml")
```

### 2. Structure Report

1. Extract key insights for executive summary
2. Map themes to sections
3. Identify strongest evidence chains
4. Note gaps or caveats from quality report

### 3. Generate Content

**Ground Every Claim:**
- Use only facts from synthesis.findings
- Link claims to finding IDs
- Include source URLs in references

**Writing Style:**
- No "It's important to note..."
- No "In conclusion..."
- No excessive hedging
- Direct, clear statements

**Section Structure:**
```markdown
## {Section Title}

{Opening statement grounded in findings}

{Evidence and analysis}

> Key insight: {finding.content}
> Source: [{source.title}]({source.url})

{Implications or context}
```

### 4. Assemble Report

Write to `${ARTIFACTS}/FINAL_REPORT.md`:

```markdown
---
title: "{plan.topic}"
generated_at: "{timestamp}"
session_id: "{session_id}"
quality_verdict: "{quality.verdict}"
---

# {Title}

## Executive Summary

{2-3 paragraphs summarizing key findings}

**Key Insights:**
1. {Insight 1}
2. {Insight 2}
3. {Insight 3}

## {Section per Theme}

{Content with source attribution}

## Gaps and Limitations

{From quality report if WARN}

## Methodology

- **Aspects researched:** {N}
- **Sources evaluated:** {total}
- **Sources used:** {used}
- **Quality verdict:** {verdict}

## Sources

| # | Source | Tier | Used In |
|---|--------|------|---------|
| 1 | [Title](url) | A | Sections 1, 3 |

---
*Generated by research-pipeline | Session: {session_id}*
```

## Constraints

- Every claim traceable to synthesis.findings
- No hallucinated facts or statistics (grounding-protocol)
- Include methodology section
- List all sources with tiers
- Note quality caveats if WARN verdict

## Quality Criteria

- [ ] Executive summary present
- [ ] All major themes covered
- [ ] Sources table complete
- [ ] No AI-typical filler phrases
- [ ] Methodology documented
